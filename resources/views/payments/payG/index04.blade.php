<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title> UPI Payment</title>

  <link rel="stylesheet" href="/payG/bootstrap.css">
  <link href="{{asset('payG/css/3.css')}}" rel="stylesheet" type="text/css">

</head>
<body class="json_video_sec">
<div style="height: 50%;background-color: #fff"></div>
<div class="payment_section">
  <div class="payment_dialog">
      <div class="payment_content">
        <div class="payment_heading">
            <h2>
              <!-- <svg width="9" height="16" viewBox="0 0 9 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7.34385 14.825L1.0251 8.52505C0.950097 8.45005 0.897097 8.3688 0.866097 8.2813C0.834597 8.1938 0.818848 8.10005 0.818848 8.00005C0.818848 7.90005 0.834597 7.8063 0.866097 7.7188C0.897097 7.6313 0.950097 7.55005 1.0251 7.47505L7.34385 1.1563C7.51885 0.981299 7.7376 0.893799 8.0001 0.893799C8.2626 0.893799 8.4876 0.987549 8.6751 1.17505C8.8626 1.36255 8.95635 1.5813 8.95635 1.8313C8.95635 2.0813 8.8626 2.30005 8.6751 2.48755L3.1626 8.00005L8.6751 13.5125C8.8501 13.6875 8.9376 13.903 8.9376 14.159C8.9376 14.4155 8.84385 14.6375 8.65635 14.825C8.46885 15.0125 8.2501 15.1063 8.0001 15.1063C7.7501 15.1063 7.53135 15.0125 7.34385 14.825Z" fill="black"/>
              </svg> -->
              Complete your UPI payment
            </h2>
        </div>
        <div class="payment_processing_section_main">
            <div class="payment_processing_section">
                <div class="payment_processing_head">
                    <div class="head_lft">
                      <h3>Payment Processing</h3>
                    </div>
                    <div class="head_rgt">
                        <div class="payment_timer">
                          <svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5.75 1.5C5.5375 1.5 5.3595 1.428 5.216 1.284C5.072 1.1405 5 0.9625 5 0.75C5 0.5375 5.072 0.35925 5.216 0.21525C5.3595 0.07175 5.5375 0 5.75 0H8.75C8.9625 0 9.14075 0.07175 9.28475 0.21525C9.42825 0.35925 9.5 0.5375 9.5 0.75C9.5 0.9625 9.42825 1.1405 9.28475 1.284C9.14075 1.428 8.9625 1.5 8.75 1.5H5.75ZM7.25 9.75C7.4625 9.75 7.64075 9.678 7.78475 9.534C7.92825 9.3905 8 9.2125 8 9V6C8 5.7875 7.92825 5.60925 7.78475 5.46525C7.64075 5.32175 7.4625 5.25 7.25 5.25C7.0375 5.25 6.8595 5.32175 6.716 5.46525C6.572 5.60925 6.5 5.7875 6.5 6V9C6.5 9.2125 6.572 9.3905 6.716 9.534C6.8595 9.678 7.0375 9.75 7.25 9.75ZM7.25 15.75C6.325 15.75 5.453 15.572 4.634 15.216C3.8155 14.8595 3.1 14.375 2.4875 13.7625C1.875 13.15 1.3905 12.4345 1.034 11.616C0.678 10.797 0.5 9.925 0.5 9C0.5 8.075 0.678 7.203 1.034 6.384C1.3905 5.5655 1.875 4.85 2.4875 4.2375C3.1 3.625 3.8155 3.14075 4.634 2.78475C5.453 2.42825 6.325 2.25 7.25 2.25C8.025 2.25 8.76875 2.375 9.48125 2.625C10.1938 2.875 10.8625 3.2375 11.4875 3.7125L12.0312 3.16875C12.1687 3.03125 12.3375 2.9625 12.5375 2.9625C12.7375 2.9625 12.9125 3.0375 13.0625 3.1875C13.2 3.325 13.2687 3.5 13.2687 3.7125C13.2687 3.925 13.2 4.1 13.0625 4.2375L12.5375 4.7625C13.0125 5.3875 13.375 6.05625 13.625 6.76875C13.875 7.48125 14 8.225 14 9C14 9.925 13.822 10.797 13.466 11.616C13.1095 12.4345 12.625 13.15 12.0125 13.7625C11.4 14.375 10.6845 14.8595 9.866 15.216C9.047 15.572 8.175 15.75 7.25 15.75ZM7.25 14.25C8.7 14.25 9.9375 13.7375 10.9625 12.7125C11.9875 11.6875 12.5 10.45 12.5 9C12.5 7.55 11.9875 6.3125 10.9625 5.2875C9.9375 4.2625 8.7 3.75 7.25 3.75C5.8 3.75 4.5625 4.2625 3.5375 5.2875C2.5125 6.3125 2 7.55 2 9C2 10.45 2.5125 11.6875 3.5375 12.7125C4.5625 13.7375 5.8 14.25 7.25 14.25Z" fill="#4F4E4E"/>
                          </svg>
                          <span>0:23</span>
                        </div>
                    </div>
                </div>
                <div class="progress_section">
                  <div id="custom_progressBar" class="custom_progressBar_">
                    <div class="custom_bar"></div>
                  </div>
                </div>
            </div>
        </div>
        <div class="payment_top_section">
          <div class="chosse_payment">
            <h3>Choose a UPI App to make the payment.</h3>
            <div class="payment_lists">
                <ul>
                  <li>
                    <a href="javascript:void(0);">
                      <div class="upi_img_sec">
                      <a href="{{str_replace('upi://','phonepe://',$params['paymentUrl'])}}" id="btn-upi-intent">
                        <img src="{{asset('skins/images/phonepay.svg')}}" alt="UPI">
                      </div>
                      <div class="upi_name">
                        <p>PhonePe</p>
                      </div>
                    </a>
                  </li>
                  <li>
                    <a href="javascript:void(0);">
                      <div class="upi_img_sec">
                      <a href="{{str_replace('upi://','gpay://upi/',$params['paymentUrl'])}}" id="btn-upi-intent">

                        <img src="{{asset('skins/images/googlepay.svg')}}" alt="UPI">
                      </div>
                      <div class="upi_name">
                        <p>Google Pay</p>
                      </div>
                    </a>
                  </li>
                  <li>
                    <a href="javascript:void(0);">
                      <div class="upi_img_sec">
                      <a href="{{str_replace('upi://','paytmmp://',$params['paymentUrl'])}}" id="btn-upi-intent">
                        <img src="{{asset('skins/images/paytm.svg')}}" alt="UPI">
                      </div>
                      <div class="upi_name">
                        <p>Paytm</p>
                      </div>
                    </a>
                  </li>
                  <li>
                    <a href="javascript:void(0);">
                      <div class="upi_img_sec">
                      <a href="{{str_replace('upi://','upi://',$params['paymentUrl'])}}" id="btn-upi-intent">
                        <img src="{{asset('skins/images/pay.svg')}}" alt="UPI">
                      </div>
                      <div class="upi_name">
                        <p>Amazon pay</p>
                      </div>
                    </a>
                  </li>
                  <li>
                    <a href="javascript:void(0);">
                      <div class="upi_img_sec">
                      <a href="{{str_replace('upi://','upi://',$params['paymentUrl'])}}" id="btn-upi-intent">

                        <img src="{{asset('skins/images/bhmi.svg')}}" alt="UPI">
                      </div>
                      <div class="upi_name">
                        <p>BHIM</p>
                      </div>
                    </a>
                  </li>
                  <li>
                    <a href="javascript:void(0);">
                      <div class="upi_img_sec">
                      <a href="{{str_replace('upi://','upi://',$params['paymentUrl'])}}" id="btn-upi-intent">

                        <img src="{{asset('skins/images/mobikwik.svg')}}" alt="UPI">
                      </div>
                      <div class="upi_name">
                        <p>Mobikwik</p>
                      </div>
                    </a>
                  </li>
                  <li>
                    <a href="javascript:void(0);">
                      <div class="upi_img_sec">
                      <a href="{{str_replace('upi://','upi://',$params['paymentUrl'])}}" id="btn-upi-intent">

                        <img src="{{asset('skins/images/freecharge.svg')}}" alt="UPI">
                      </div>
                      <div class="upi_name">
                        <p>Freecharge</p>
                      </div>
                    </a>
                  </li>
                  <li>
                    <a href="javascript:void(0);">
                      <div class="upi_img_sec">
                        <img src="{{asset('skins/images/dots.svg')}}" alt="Dots">
                      </div>
                      <div class="upi_name">
                      <a href="{{str_replace('upi://','upi://',$params['paymentUrl'])}}" id="btn-upi-intent">
                      <p style="text-decoration:underline;"><span>View</span> more</p>
                      </div>
                    </a>
                  </li>
                </ul>
            </div>
          </div>
          <div class="or_sec">
            <p>OR</p>
          </div>
        </div>
        <div class="qr_section">
          <div class="qr_section_in">
            <div class="qr_img_sec" >
              <div class="qr_left">
                <div class="qr_left_in">
                 <img src="" class="qr-code" alt="qr">
                </div>
              </div>
              <div class="qr_rgt">
                <p>Scan the QR code on any UPI App to make the payment</p>
                <div class="download_share_sec">

                  <ul>
                    <!-- <li>
                    <a href="/json_video" target="_blank" class="jrk_download_btn">
                        <svg width="13" height="15" viewBox="0 0 13 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path fill-rule="evenodd" clip-rule="evenodd" d="M0.157715 13.5251C0.157715 13.2865 0.252536 13.0575 0.421319 12.8887C0.590101 12.72 0.81902 12.6251 1.05771 12.6251H11.8577C12.0964 12.6251 12.3253 12.72 12.4941 12.8887C12.6629 13.0575 12.7577 13.2865 12.7577 13.5251C12.7577 13.7638 12.6629 13.9928 12.4941 14.1615C12.3253 14.3303 12.0964 14.4251 11.8577 14.4251H1.05771C0.81902 14.4251 0.590101 14.3303 0.421319 14.1615C0.252536 13.9928 0.157715 13.7638 0.157715 13.5251ZM3.12142 6.58885C3.29019 6.42012 3.51907 6.32534 3.75771 6.32534C3.99636 6.32534 4.22524 6.42012 4.39401 6.58885L5.55771 7.75255V0.925146C5.55771 0.686452 5.65254 0.457533 5.82132 0.28875C5.9901 0.119968 6.21902 0.0251465 6.45772 0.0251465C6.69641 0.0251465 6.92533 0.119968 7.09411 0.28875C7.26289 0.457533 7.35772 0.686452 7.35772 0.925146V7.75255L8.52142 6.58885C8.60444 6.50289 8.70375 6.43432 8.81355 6.38715C8.92336 6.33999 9.04145 6.31516 9.16095 6.31412C9.28046 6.31308 9.39897 6.33585 9.50957 6.38111C9.62018 6.42636 9.72067 6.49319 9.80517 6.57769C9.88967 6.66219 9.9565 6.76268 10.0018 6.87329C10.047 6.98389 10.0698 7.10241 10.0687 7.22191C10.0677 7.34141 10.0429 7.45951 9.99571 7.56931C9.94854 7.67911 9.87997 7.77842 9.79401 7.86145L7.09402 10.5614C6.92524 10.7302 6.69636 10.825 6.45772 10.825C6.21907 10.825 5.99019 10.7302 5.82142 10.5614L3.12142 7.86145C2.95269 7.69267 2.85791 7.46379 2.85791 7.22515C2.85791 6.9865 2.95269 6.75762 3.12142 6.58885Z" fill="#0DDAB5"/>
                        </svg>
                        <p>Download</p>

                      </a>
                    </li>
                    <li>
                      <a href="javascript:void(0);">
                        <svg width="15" height="16" viewBox="0 0 15 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M11.9578 15.7251C11.3328 15.7251 10.8015 15.5063 10.364 15.0688C9.92651 14.6313 9.70776 14.1001 9.70776 13.4751C9.70776 13.3876 9.71401 13.2968 9.72651 13.2028C9.73901 13.1093 9.75776 13.0251 9.78276 12.9501L4.49526 9.8751C4.28276 10.0626 4.04526 10.2093 3.78276 10.3153C3.52026 10.4218 3.24526 10.4751 2.95776 10.4751C2.33276 10.4751 1.80151 10.2563 1.36401 9.81885C0.926514 9.38135 0.707764 8.8501 0.707764 8.2251C0.707764 7.6001 0.926514 7.06885 1.36401 6.63135C1.80151 6.19385 2.33276 5.9751 2.95776 5.9751C3.24526 5.9751 3.52026 6.0281 3.78276 6.1341C4.04526 6.2406 4.28276 6.3876 4.49526 6.5751L9.78276 3.5001C9.75776 3.4251 9.73901 3.34085 9.72651 3.24735C9.71401 3.15335 9.70776 3.0626 9.70776 2.9751C9.70776 2.3501 9.92651 1.81885 10.364 1.38135C10.8015 0.943848 11.3328 0.725098 11.9578 0.725098C12.5828 0.725098 13.114 0.943848 13.5515 1.38135C13.989 1.81885 14.2078 2.3501 14.2078 2.9751C14.2078 3.6001 13.989 4.13135 13.5515 4.56885C13.114 5.00635 12.5828 5.2251 11.9578 5.2251C11.6703 5.2251 11.3953 5.17185 11.1328 5.06535C10.8703 4.95935 10.6328 4.8126 10.4203 4.6251L5.13276 7.7001C5.15776 7.7751 5.17651 7.85935 5.18901 7.95285C5.20151 8.04685 5.20776 8.1376 5.20776 8.2251C5.20776 8.3126 5.20151 8.4031 5.18901 8.4966C5.17651 8.5906 5.15776 8.6751 5.13276 8.7501L10.4203 11.8251C10.6328 11.6376 10.8703 11.4906 11.1328 11.3841C11.3953 11.2781 11.6703 11.2251 11.9578 11.2251C12.5828 11.2251 13.114 11.4438 13.5515 11.8813C13.989 12.3188 14.2078 12.8501 14.2078 13.4751C14.2078 14.1001 13.989 14.6313 13.5515 15.0688C13.114 15.5063 12.5828 15.7251 11.9578 15.7251Z" fill="#0DDAB5"/>
                        </svg>
                        <p>Share</p>
                      </a>
                    </li> -->
                  </ul>
                </div>
              </div>
            </div>
            <div class="payment_footer_sec">
              <p>After making the payment of INR {{$params["payment"]->amount}}, Please click on the <span>continue</span> button, if not automatically redirected.</p>
            </div>
            <div class="continue_button_sec goToPayment">
              <a href="javascript:void(0);">Continue</a>
            </div>
          </div>

        </div>

      </div>
  </div>
</div>
<link rel="stylesheet" href="{{asset('ownpay/assets/css/my_style.css')}}">
<style media="screen">
  .jrk_popup_wrapper{
    padding:2px;
  }
  .jrk_pop_container p{
    font-size: 14px;
  }
</style>
      <!-- POPUP -->
      <div class="jrk_popup_wrapper">
          <div class="jrk_pop_container">
              <p>We are yet to receive your payment, we will credit it as soon as we receive it. You can wait on this screen or close and continue playing and your payment will be auto-credited.</p>
              <!-- <div class="app"></div> -->
              <div class="payment_processing_section_main">
                <div class="payment_processing_section">
                    <div class="payment_processing_head">
                        <div class="head_lft">
                          <h3>Payment Processing</h3>
                        </div>
                        <div class="head_rgt">
                            <div class="payment_timer">
                              <svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5.75 1.5C5.5375 1.5 5.3595 1.428 5.216 1.284C5.072 1.1405 5 0.9625 5 0.75C5 0.5375 5.072 0.35925 5.216 0.21525C5.3595 0.07175 5.5375 0 5.75 0H8.75C8.9625 0 9.14075 0.07175 9.28475 0.21525C9.42825 0.35925 9.5 0.5375 9.5 0.75C9.5 0.9625 9.42825 1.1405 9.28475 1.284C9.14075 1.428 8.9625 1.5 8.75 1.5H5.75ZM7.25 9.75C7.4625 9.75 7.64075 9.678 7.78475 9.534C7.92825 9.3905 8 9.2125 8 9V6C8 5.7875 7.92825 5.60925 7.78475 5.46525C7.64075 5.32175 7.4625 5.25 7.25 5.25C7.0375 5.25 6.8595 5.32175 6.716 5.46525C6.572 5.60925 6.5 5.7875 6.5 6V9C6.5 9.2125 6.572 9.3905 6.716 9.534C6.8595 9.678 7.0375 9.75 7.25 9.75ZM7.25 15.75C6.325 15.75 5.453 15.572 4.634 15.216C3.8155 14.8595 3.1 14.375 2.4875 13.7625C1.875 13.15 1.3905 12.4345 1.034 11.616C0.678 10.797 0.5 9.925 0.5 9C0.5 8.075 0.678 7.203 1.034 6.384C1.3905 5.5655 1.875 4.85 2.4875 4.2375C3.1 3.625 3.8155 3.14075 4.634 2.78475C5.453 2.42825 6.325 2.25 7.25 2.25C8.025 2.25 8.76875 2.375 9.48125 2.625C10.1938 2.875 10.8625 3.2375 11.4875 3.7125L12.0312 3.16875C12.1687 3.03125 12.3375 2.9625 12.5375 2.9625C12.7375 2.9625 12.9125 3.0375 13.0625 3.1875C13.2 3.325 13.2687 3.5 13.2687 3.7125C13.2687 3.925 13.2 4.1 13.0625 4.2375L12.5375 4.7625C13.0125 5.3875 13.375 6.05625 13.625 6.76875C13.875 7.48125 14 8.225 14 9C14 9.925 13.822 10.797 13.466 11.616C13.1095 12.4345 12.625 13.15 12.0125 13.7625C11.4 14.375 10.6845 14.8595 9.866 15.216C9.047 15.572 8.175 15.75 7.25 15.75ZM7.25 14.25C8.7 14.25 9.9375 13.7375 10.9625 12.7125C11.9875 11.6875 12.5 10.45 12.5 9C12.5 7.55 11.9875 6.3125 10.9625 5.2875C9.9375 4.2625 8.7 3.75 7.25 3.75C5.8 3.75 4.5625 4.2625 3.5375 5.2875C2.5125 6.3125 2 7.55 2 9C2 10.45 2.5125 11.6875 3.5375 12.7125C4.5625 13.7375 5.8 14.25 7.25 14.25Z" fill="#4F4E4E"></path>
                              </svg>
                              <span>9:34</span>
                            </div>
                        </div>
                    </div>
                    <div class="progress_section">
                      <div id="custom_progressBar" class="custom_progressBar_">
                        <div class="custom_bar" style="width: 281.26px;"></div>
                      </div>
                    </div>
                </div>
            </div>
              <div class="jrk_button_wrapper">
                  <button class="cust_border close_popup">Close</button>
                  <button class="jrk_btn_green" style="background:#0DDAB5">Wait</button>
              </div>
          </div>
      </div>

        <script src="{{asset('skins/js/jquery.min.js')}}"></script>

        <script>
          function progress(timeleft, timetotal, $element) {
            var progressBarWidth = timeleft * $element.width() / timetotal;
            $element.find('div').animate({ width: progressBarWidth }, 500);
            $('.payment_timer').find('span').html(Math.floor(timeleft/60) + ":"+ timeleft%60);
            if(timeleft > 0) {
                setTimeout(function() {
                    progress(timeleft - 1, timetotal, $element);
                }, 1000);
            }else{
              $('.custom_bar').hide();
              setTimeout(function functionName() {
                window.location = '/pg/payG/failed?orderId={{$params["payment"]->orderId}}'
              },1000)
            }
          };

          progress(600, 600, $('.custom_progressBar_'));

        </script>
        <script type="text/javascript">
            const baseURL = 'https://api.qrserver.com/v1/create-qr-code/?data='
            const config = '&size=120x120'
            const qrCode = document.querySelector('.qr-code')

            window.onload = () => {
                qrCode.src = baseURL + "{{urlencode($params['paymentUrl'])}}" + config
                $(qrCode).show();
            }
        </script>
        <script>
          $('body').on('click', '.jrk_download_btn', function() {
              $('.jrk_video_container').show();
              callVideo();
          })
          $('body').on('click', '.jrk_closeSymbol', function() {
              $('.jrk_video_container').hide();
          });
      </script>


      <script src="https://js.pusher.com/7.0/pusher.min.js"></script>


      <script>
          var pusher = new Pusher('{{config("app.pusher.key")}}', {
              cluster: '{{config("app.pusher.cluster")}}'
          });

          var player_channel = pusher.subscribe("payGCheck{{$params['payment']->id}}");

          player_channel.bind('payGCheck', function(response) {
              if ("{{$params['payment']->id}}" == response.id) {
                  if (response.status == 200) {
                      window.location = '/pg/payG/success?orderId={{$params["payment"]->orderId}}'
                  } else {
                      window.location = '/pg/payG/failed?orderId={{$params["payment"]->orderId}}'
                  }
              }
          });
      </script>

      <script>
        var clicked = 0;
        $(document).ready(function() {


          $('body').on('click', '.jrk_btn_green', function() {
              $('.jrk_popup_wrapper').removeClass("d_grid");
          })

            $('body').on('click', '.goToPayment', function() {
                $('.jrk_popup_wrapper').addClass("d_grid");
            })
            $('body').on('click', '.close_popup', function() {
                $('.jrk_popup_wrapper').removeClass("d_grid");
                window.close();

            })

            $('body').on('click', '.checkStatus', function() {
                clicked = 1
                $('#continue-text').html('Please wait...');
                setTimeout(function() {
                    $('#continue-text').html('Continue');
                }, 2000)

                checkStatus();

            })
        })

        function checkStatus() {
            $.ajax({
                type: 'POST',
                async: false,
                global: true,
                url: "/pg/payG/checkStatus/{{$params['payment']->id}}",
                success: function(data) {

                    if (data.txnStatus == 2) {
                        window.location = '/pg/payG/success?orderId={{$params["payment"]->orderId}}'
                    } else if (data.txnStatus == 3) {
                        window.location = '/pg/payG/failed?orderId={{$params["payment"]->orderId}}'
                    }

                    if (clicked == 1) {
                        clicked = 0
                        $('.jrk_popup_wrapper').addClass("d_grid");
                    }

                    $('#continue-text').html('Continue');

                }
            });
        }

        setInterval(function() {
            checkStatus();
        }, 3000)
      </script>


    </body>
</html>
